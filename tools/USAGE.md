# 画像ダウンローダー 使い方

## セットアップ

```bash
# 仮想環境を作成（初回のみ）
python -m venv .venv

# 仮想環境を有効化
source .venv/bin/activate  # Linux/Mac
# .venv\Scripts\activate   # Windows

# 依存パッケージをインストール
pip install -r tools/requirements.txt
```

## 実行方法

```bash
python tools/image_downloader.py
```

## メニュー

### 1. 動物の判別テスト画像をダウンロード

似ている動物のペアから選んで画像をダウンロードします。

**登録済みペア:**
| # | ペア |
|---|------|
| 1 | チーター vs ヒョウ |
| 2 | ジャガー vs ヒョウ |
| 3 | 柴犬 vs 秋田犬 |
| 4 | ハスキー vs マラミュート |
| 5 | オオカミ vs ハスキー |
| 6 | アライグマ vs タヌキ |
| 7 | カラス vs ワタリガラス |
| 8 | アシカ vs アザラシ |
| 9 | ライオン vs トラ |
| 10 | ワニ vs クロコダイル |

**選択肢:**
- `1` - 特定のペアを選ぶ
- `2` - 全ペアをダウンロード
- `3` - カスタム（自分で動物名を入力）

### 2. 人物の画像をダウンロード

- 双子（一緒に写っている写真）
- 似ている人・そっくりさん

### 3. ダウンロード済み画像の統計を表示

各カテゴリの画像枚数を確認できます。

## 出力フォルダ構造

```
downloaded_images/
├── same/            # 同じもの同士（チーター×チーター など）
├── different/       # 違うもの同士（チーター×ヒョウ など）
├── twins/           # 双子の写真
├── similar_people/  # 似ている人の写真
├── temp_a/          # 作業用（自動クリア）
└── temp_b/          # 作業用（自動クリア）
```

## 画像形式

- **同じもの (same/)**: 2枚の同じ動物の画像を横に並べた比較画像
- **違うもの (different/)**: 2枚の違う動物の画像を横に並べた比較画像
- **人物**: 検索結果そのまま保存

## 例

```bash
$ python tools/image_downloader.py

==================================================
  判別テスト用 画像ダウンローダー
==================================================
✓ フォルダを作成しました

【メニュー】
1. 動物の判別テスト画像をダウンロード
2. 人物の画像をダウンロード
3. ダウンロード済み画像の統計を表示

番号を入力: 1
```

## 注意事項

- インターネット接続が必要です
- ダウンロードには時間がかかる場合があります
- 画像の著作権にご注意ください（教育目的での使用を推奨）

---

# 信頼性の高い画像ダウンローダー（reliable_image_downloader.py）

Androidアプリと同じ画像ソースを使用して、テストセット用の画像をダウンロードするツールです。

## 特徴

- **信頼性の高いAPI**を使用（Bingスクレイピングではなく）
  - iNaturalist API（野生動物）
  - GBIF API（生物多様性データ）
  - The Dog API（犬種）
  - The Cat API（猫種）
  - Unsplash Source API（車など）
  - Wikimedia Commons（ロゴ、フォールバック）

## 実行方法

```bash
python tools/reliable_image_downloader.py
```

## メニュー

### 1. 単一種の画像をダウンロード

特定の種の画像のみをダウンロードします。

```
利用可能な種:
  1. cheetah（チーター）
  2. leopard（ヒョウ）
  3. jaguar（ジャガー）
  4. shiba_inu（柴犬）
  ...
```

### 2. ジャンル全体をダウンロード

ジャンル内のすべての種を一括ダウンロードします。

```
利用可能なジャンル:
  1. SMALL_CATS - 小型ネコ科
  2. DOGS - 犬種
  3. WILD_DOGS - 野生のイヌ科
  4. RACCOONS - アライグマ科
  5. BIRDS - 鳥類
  6. MARINE - 海洋動物
  7. REPTILES - 爬虫類
  8. BEARS - クマ科
  9. PRIMATES - 霊長類
  10. SIMILAR_PEOPLE - 似ている人
  11. CARS - 車
  12. LOGOS - ロゴ
  13. INSECTS - 昆虫
```

### 3. すべてをダウンロード

すべてのジャンル・種の画像をダウンロードします。

### 4. 統計を表示

ダウンロード済み画像の枚数を確認します。

## 出力フォルダ構造

ダウンロード後、手動で画像を選別してください。

```
test_sets/
├── small_cats/
│   ├── manifest.json
│   ├── persian_cat/
│   │   ├── 001.jpg
│   │   ├── 002.jpg
│   │   └── ...
│   ├── british_shorthair/
│   └── scottish_fold/
├── dogs/
│   ├── manifest.json
│   ├── shiba/
│   ├── akita/
│   └── ...
├── birds/
│   ├── manifest.json
│   ├── crow/
│   ├── raven/
│   └── ...
└── ...
```

## API制限について

- **iNaturalist**: レートリミットあり（0.3秒間隔で取得）
- **Dog/Cat API**: 無料利用可能
- **GBIF**: 無料利用可能
- **Wikimedia**: フォールバック用

## 例

```bash
$ python tools/reliable_image_downloader.py

============================================================
  テストセット画像ダウンローダー
  (iNaturalist / GBIF / Dog API / Cat API / Wikimedia)
============================================================

【メニュー】
1. ジャンル一覧を表示
2. 特定のジャンルをダウンロード
3. 全ジャンルをダウンロード
4. 終了

番号を入力: 2

利用可能なジャンル:
  small_cats      - ネコ科小型 (7 types)
  dogs            - 犬種 (13 types)
  wild_dogs       - 犬と野生 (11 types)
  ...

ジャンルIDを入力: dogs
各タイプの画像数 (デフォルト: 20): 30

ジャンル: 犬種 (dogs) の画像をダウンロード中...
```
